---
- project:
    name: lede
    jobs:
      - 'freifunk-firmware'

- job:
    name: 'freifunk-firmware'
    project-type: freestyle
    defaults: global
    description: 'Generated by job-builder'
    display-name: 'freifunk firmware unstable'
    quiet-period: 5
    builders:
      - shell:
          !include-raw: freifunk-firmware.sh
    scm:
      - 'freifunk-firmware'
    publishers:
        - warnings:
            workspace-file-scanners:
              - file-pattern: 'lede/logs/**'
                scanner: 'GNU Make + GNU C Compiler (gcc)'
            run-always: true
            only-use-stable-builds-as-reference: true
    parameters:
      - string:
          name: ARCH
          default: ar71xx_generic
          description: "Build for this architecture. E.g. ar71xx_generic"

- scm:
    name: freifunk-firmware
    scm:
      - git:
          url: https://github.com/freifunk-berlin/firmware
          branches:
            - origin/master
          wipe-workspace: false
          git-config-name: 'Jenkins Builder'
          git-config-email: 'admax@fe80.eu'
